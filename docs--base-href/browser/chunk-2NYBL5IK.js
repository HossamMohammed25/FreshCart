import{l as N,p as z,q as G}from"./chunk-BE6ASITS.js";import{a as R}from"./chunk-7PNWPDBK.js";import{a as O}from"./chunk-ZQG2RUHL.js";import{a as D,c as j,e as $,j as J}from"./chunk-BWYYIAS5.js";import{a as L}from"./chunk-UFXEPOG3.js";import{h as B}from"./chunk-DG4QCYDV.js";import{Cb as m,Db as p,Fb as W,Gb as I,Hb as E,Ja as F,Jb as M,Kb as V,Lb as H,Na as a,Pb as y,Rb as P,Z as u,aa as w,cb as C,eb as v,ib as x,jb as k,ka as h,kb as b,la as _,lb as T,mb as o,nb as s,nc as A,ob as l,rb as f,tb as g,ub as d}from"./chunk-4C3NXVLE.js";var U=(t,r)=>r.id,q=t=>["/details",t],K=()=>[0,1,2,3,4];function Q(t,r){if(t&1){let i=f();o(0,"span",13),g("click",function(){h(i);let e=d().$implicit,c=d();return _(c.deleteProduct(e.id))}),l(1,"i",14),s()}}function X(t,r){if(t&1){let i=f();o(0,"span",13),g("click",function(){h(i);let e=d().$implicit,c=d();return _(c.addToWishlist(e.id))}),l(1,"i",15),s()}}function Y(t,r){t&1&&(o(0,"span"),l(1,"i",16),s())}function Z(t,r){t&1&&l(0,"i",9)}function ee(t,r){if(t&1){let i=f();o(0,"div",2)(1,"div",3),C(2,Q,2,0,"span")(3,X,2,0),o(4,"div",4),l(5,"img",5),o(6,"h3",6),m(7),s(),o(8,"h4",7),m(9),s(),o(10,"div",8)(11,"span"),m(12),y(13,"currency"),s(),o(14,"div"),b(15,Y,2,0,"span",null,k),C(17,Z,1,0,"i",9),o(18,"span",10),m(19),s()()()(),o(20,"button",11),g("click",function(){let e=h(i).$implicit,c=d();return _(c.addToCart(e.id))}),l(21,"i",12),m(22,"Add To Card"),s()()()}if(t&2){let i=r.$implicit,n=d();a(2),x(2,n.changeHeart.includes(i.id)?2:3),a(2),v("routerLink",H(12,q,i.id)),a(),v("src",i.imageCover,F)("alt",i.title),a(2),p(i.category.name),a(2),p(i.title.split(" ",2).join(" ")),a(3),p(P(13,9,i.price,"GBP")),a(3),T(V(14,K).slice(0,i.ratingsAverage)),a(2),x(17,i.ratingsAverage%1!==0?17:-1),a(2),p(i.ratingsAverage)}}var _e=(()=>{let r=class r{constructor(){this.productSearch="",this._ProductsService=u(R),this._CartService=u(L),this._WishlistService=u(O),this._ToastrService=u(N),this.products=[],this.categoriesList=[],this.changeHeart=null}ngOnInit(){this.productSub=this._ProductsService.getAllProducts().subscribe({next:n=>{this.products=n.data,localStorage.getItem("heart")!==null&&(this.changeHeart=localStorage.getItem("heart"))}})}addToCart(n){this.addCartSub=this._CartService.addProductToCart(n).subscribe({next:e=>{this._ToastrService.success(e.message,"Fresh Cart"),this._CartService.cartNumber.set(e.numOfCartItems)}})}addToWishlist(n){this.addWishSub=this._WishlistService.setToWishlist(n).subscribe({next:e=>{this.changeHeart=e.data,localStorage.setItem("heart",JSON.stringify(this.changeHeart)),this._ToastrService.success(e.message,"Wishlist")}})}deleteProduct(n){this.removeSub=this._WishlistService.removeProductWishlist(n).subscribe({next:e=>{this.changeHeart=e.data,localStorage.setItem("heart",JSON.stringify(this.changeHeart))}})}ngOnDestroy(){this.productSub?.unsubscribe(),this.addCartSub?.unsubscribe(),this.addWishSub?.unsubscribe(),this.removeSub?.unsubscribe()}};r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=w({type:r,selectors:[["app-product"]],standalone:!0,features:[M],decls:6,vars:4,consts:[["type","search","placeholder","Search by Name...",1,"form-control","w-50","mx-auto","my-3",".input",3,"ngModelChange","ngModel"],[1,"row","g-3","my-5"],[1,"col-md-3"],[1,"product","p-2"],[3,"routerLink"],[1,"w-100",3,"src","alt"],[1,"small","text-main"],[1,"h6"],[1,"d-flex","justify-content-between","align-items-center"],[1,"fa-solid","fa-star-half-stroke","rating-color"],[1,"text-muted"],[1,"btn-main","w-100","my-2",3,"click"],[1,"fa-solid","fa-cart-shopping","me-2"],[3,"click"],[1,"fa-solid","heart","text-danger","cr","fa-heart","fa-2x"],[1,"fa-solid","heart","fa-heart","fa-2x","cr",2,"color","#ccc"],[1,"fas","fa-star","rating-color"]],template:function(e,c){e&1&&(o(0,"section")(1,"input",0),E("ngModelChange",function(S){return I(c.productSearch,S)||(c.productSearch=S),S}),s(),o(2,"div",1),b(3,ee,23,15,"div",2,U),y(5,"search"),s()()),e&2&&(a(),W("ngModel",c.productSearch),a(2),T(P(5,1,c.products,c.productSearch)))},dependencies:[z,B,A,G,J,D,j,$]});let t=r;return t})();export{_e as ProductComponent};
