import './polyfills.server.mjs';
import{a as F}from"./chunk-GBHRAEDD.mjs";import{l as V}from"./chunk-SX4IOAQB.mjs";import"./chunk-EC73D4GI.mjs";import{Db as o,Eb as f,Fb as b,Ka as v,Kb as D,Mb as E,Oa as s,Qb as P,Sb as I,W as h,_ as S,db as g,fb as C,ia as d,ja as p,jb as k,lb as y,mb as w,nb as a,ob as i,pb as u,sb as x,ub as _,vb as m,yc as T}from"./chunk-ZWGHKFBJ.mjs";import"./chunk-VVCT4QZE.mjs";var $=(n,c)=>c.product.id,L=n=>["/orders",n];function O(n,c){if(n&1){let e=x();a(0,"div",4)(1,"div",6)(2,"div"),u(3,"img",7),i()(),a(4,"div",8)(5,"div")(6,"h5"),o(7),i(),a(8,"p",9),o(9),i(),a(10,"span",10),_("click",function(){let t=d(e).$implicit,l=m(2);return p(l.deleteItem(t.product.id))}),u(11,"i",11),o(12," Remove "),i()(),a(13,"div",12)(14,"span",13),_("click",function(){let t=d(e).$implicit,l=m(2);return p(l.updateCount(t.product.id,t.count+1))}),u(15,"i",14),i(),a(16,"span"),o(17),i(),a(18,"span",13),_("click",function(){let t=d(e).$implicit,l=m(2);return p(l.updateCount(t.product.id,t.count-1))}),u(19,"i",15),i()()()()}if(n&2){let e=c.$implicit;s(3),C("src",e.product.imageCover,v)("alt",e.product.title),s(4),f(e.product.title),s(2),b("price : ",e.price,""),s(8),f(e.count)}}function j(n,c){if(n&1){let e=x();a(0,"section",0)(1,"div",1)(2,"h2"),o(3,"Shop Cart:"),i(),a(4,"button",2),_("click",function(){d(e);let t=m();return p(t.clearItems())}),o(5,"Clear Cart"),i()(),a(6,"p",3),o(7),P(8,"currency"),i(),y(9,O,20,5,"div",4,$),a(11,"button",5),o(12,"Check Out"),i()()}if(n&2){let e=m();s(7),b("Total Cart Price : ",I(8,2,e.cartDetails==null?null:e.cartDetails.totalCartPrice,"GBP"),""),s(2),w(e.cartDetails==null?null:e.cartDetails.products),s(2),C("routerLink",E(5,L,e.cartDetails==null?null:e.cartDetails._id))}}function B(n,c){n&1&&(a(0,"section",0)(1,"div",16)(2,"h2",3),o(3,"Your cart is empty"),i(),a(4,"a",17),o(5,"Go to Shop "),u(6,"i",18),i()(),u(7,"img",19),i())}var U=(()=>{let c=class c{constructor(){this._CartService=h(F),this.cartDetails={}}ngOnInit(){this.getProductsSub=this._CartService.getProductsCart().subscribe({next:r=>{this.cartDetails=r.data}})}deleteItem(r){this.deleteProductsSub=this._CartService.deleteProductsCart(r).subscribe({next:t=>{this.cartDetails=t.data,this._CartService.cartNumber.set(t.numOfCartItems)}})}updateCount(r,t){t>0?this.updateProductsSub=this._CartService.updateCount(r,t).subscribe({next:l=>{this.cartDetails=l.data}}):this.deleteItem(r)}clearItems(){this.clearProductsSub=this._CartService.clearCart().subscribe({next:r=>{this._CartService.cartNumber.set(0),r.message=="success"&&(this.cartDetails=null)}})}ngOnDestroy(){this.getProductsSub?.unsubscribe(),this.deleteProductsSub?.unsubscribe(),this.updateProductsSub?.unsubscribe(),this.clearProductsSub?.unsubscribe()}};c.\u0275fac=function(t){return new(t||c)},c.\u0275cmp=S({type:c,selectors:[["app-cart"]],standalone:!0,features:[D],decls:2,vars:1,consts:[[1,"bg-main-light","my-3","rounded-3","shadow","p-4"],[1,"d-flex","justify-content-between","align-items-center"],[1,"btn","btn-outline-danger",3,"click"],[1,"text-main"],[1,"row","my-3","border-bottom","py-2"],[1,"btn","btn-primary",3,"routerLink"],[1,"col-md-1"],[1,"w-100",3,"src","alt"],[1,"col-md-11","d-flex","justify-content-between","align-items-center"],[1,"text-main","my-1"],[1,"cr","text-danger",3,"click"],[1,"fa-solid","fa-trash-can"],[1,"d-flex","align-items-center","gap-2"],[3,"click"],[1,"fa-regular","fa-square-plus","text-main","fa-2xl","cr"],[1,"fa-regular","fa-square-minus","text-main","fa-2xl","cr"],[1,"d-flex","align-items-center","gap-3"],["routerLink","/home",1,"link-primary","cr"],[1,"fa-solid","fa-angles-right"],["src","./assets/images/kettle-desaturated._CB445243794_.svg","alt","empty cart",1,"w-50","my-3"]],template:function(t,l){t&1&&g(0,j,13,7,"section",0)(1,B,8,0),t&2&&k(0,!(l.cartDetails==null||l.cartDetails.products==null)&&l.cartDetails.products.length?0:1)},dependencies:[T,V]});let n=c;return n})();export{U as CartComponent};
