import './polyfills.server.mjs';
import{a as E}from"./chunk-RM7W3U3M.mjs";import"./chunk-QZLY374Y.mjs";import{a as P,b as u,c as b,d as F,f as V,g as T,h as L,i as N,k as A}from"./chunk-NB7DLP3G.mjs";import{k as S}from"./chunk-SX4IOAQB.mjs";import"./chunk-EC73D4GI.mjs";import{Db as l,Kb as y,Oa as s,W as _,_ as x,db as m,fb as c,ia as g,ja as C,jb as d,nb as r,ob as o,pb as p,sb as v,ub as w,vb as f}from"./chunk-ZWGHKFBJ.mjs";import"./chunk-VVCT4QZE.mjs";function G(t,a){t&1&&(r(0,"p",6),l(1,"Your Email is Invalid"),o())}function R(t,a){t&1&&(r(0,"span"),p(1,"i",8),o())}function B(t,a){if(t&1){let i=v();r(0,"form",2),w("ngSubmit",function(){g(i);let n=f();return C(n.verifyEmailSubmit())}),r(1,"div",3)(2,"label",4),l(3,"email:"),o(),p(4,"input",5),m(5,G,2,0,"p",6),o(),r(6,"button",7),l(7,"Verify Email "),m(8,R,2,0,"span"),o()()}if(t&2){let i,e=f();c("formGroup",e.verifyEmail),s(5),d(5,(i=e.verifyEmail.get("email"))!=null&&i.errors&&((i=e.verifyEmail.get("email"))!=null&&i.touched||(i=e.verifyEmail.get("email"))!=null&&i.dirty)?5:-1),s(),c("disabled",e.verifyEmail.invalid||e.isLoading),s(2),d(8,e.isLoading?8:-1)}}function D(t,a){t&1&&(r(0,"p",6),l(1,"Reset code is invalid or has expired"),o())}function q(t,a){t&1&&(r(0,"span"),p(1,"i",8),o())}function I(t,a){if(t&1){let i=v();r(0,"form",2),w("ngSubmit",function(){g(i);let n=f();return C(n.verifyCodeSubmit())}),r(1,"div",3)(2,"label",9),l(3,"reset code:"),o(),p(4,"input",10),m(5,D,2,0,"p",6),o(),r(6,"button",7),l(7,"Verify Email "),m(8,q,2,0,"span"),o()()}if(t&2){let i,e=f();c("formGroup",e.verifyCode),s(5),d(5,(i=e.verifyCode.get("resetCode"))!=null&&i.errors&&((i=e.verifyCode.get("resetCode"))!=null&&i.touched||(i=e.verifyCode.get("resetCode"))!=null&&i.dirty)?5:-1),s(),c("disabled",e.verifyCode.invalid||e.isLoading),s(2),d(8,e.isLoading?8:-1)}}function M(t,a){t&1&&(r(0,"p",6),l(1,"Your Email is Invalid"),o())}function k(t,a){t&1&&(r(0,"p",6),l(1,"Your Password is Invalid"),o())}function Y(t,a){t&1&&(r(0,"span"),p(1,"i",8),o())}function $(t,a){if(t&1){let i=v();r(0,"form",2),w("ngSubmit",function(){g(i);let n=f();return C(n.resetPasswordSubmit())}),r(1,"div",3)(2,"label",4),l(3,"email:"),o(),p(4,"input",11),m(5,M,2,0,"p",6),o(),r(6,"div",3)(7,"label",12),l(8,"New Password:"),o(),p(9,"input",13),m(10,k,2,0,"p",6),o(),r(11,"button",7),l(12,"Verify Email "),m(13,Y,2,0,"span"),o()()}if(t&2){let i,e,n=f();c("formGroup",n.resetPassword),s(5),d(5,(i=n.resetPassword.get("email"))!=null&&i.errors&&((i=n.resetPassword.get("email"))!=null&&i.touched||(i=n.resetPassword.get("email"))!=null&&i.dirty)?5:-1),s(5),d(10,(e=n.resetPassword.get("newPassword"))!=null&&e.errors&&((e=n.resetPassword.get("newPassword"))!=null&&e.touched||(e=n.resetPassword.get("newPassword"))!=null&&e.dirty)?10:-1),s(),c("disabled",n.resetPassword.invalid||n.isLoading),s(2),d(13,n.isLoading?13:-1)}}var W=(()=>{let a=class a{constructor(){this._FormBuilder=_(N),this._AuthService=_(E),this._Router=_(S),this.steps=1,this.isLoading=!1,this.verifyEmail=this._FormBuilder.group({email:[null,[u.required,u.email]]}),this.verifyCode=this._FormBuilder.group({resetCode:[null,[u.required,u.pattern(/^[0-9]{6}$/)]]}),this.resetPassword=this._FormBuilder.group({email:[null,[u.required,u.email]],newPassword:[null,[u.required,u.pattern(/^\w{6,}$/)]]})}verifyEmailSubmit(){let e=this.verifyEmail.get("email")?.value;this.resetPassword.get("email")?.patchValue(e),this.isLoading=!0,this._AuthService.setEmailVerify(this.verifyEmail.value).subscribe({next:n=>{this.isLoading=!1,n.statusMsg==="success"&&(this.steps=2)}})}verifyCodeSubmit(){this.isLoading=!0,this._AuthService.setCodeVerify(this.verifyCode.value).subscribe({next:e=>{this.isLoading=!1,e.status==="Success"&&(this.steps=3)}})}resetPasswordSubmit(){this.isLoading=!0,this._AuthService.setResetPassword(this.resetPassword.value).subscribe({next:e=>{this.isLoading=!1,localStorage.setItem("userToken",e.token),this._AuthService.saveUserData(),this._Router.navigate(["/home"])}})}};a.\u0275fac=function(n){return new(n||a)},a.\u0275cmp=x({type:a,selectors:[["app-forget-password"]],standalone:!0,features:[y],decls:6,vars:1,consts:[[1,"text-main","my-2","text-center"],[1,"bg-main-light","rounded-3","shadow","p-3","my-5",3,"formGroup"],[1,"bg-main-light","rounded-3","shadow","p-3","my-5",3,"ngSubmit","formGroup"],[1,"my-2"],["for","email"],["formControlName","email","type","email","id","email",1,"form-control"],[1,"alert","alert-danger","mt-2"],[1,"btn-main",3,"disabled"],[1,"fas","fa-spin","fa-spinner"],["for","resetCode"],["formControlName","resetCode","type","text","id","resetCode",1,"form-control"],["readonly","","formControlName","email","type","email","id","email",1,"form-control"],["for","password"],["formControlName","newPassword","type","password","id","password",1,"form-control"]],template:function(n,h){n&1&&(r(0,"section")(1,"h1",0),l(2,"Forgot Password"),o(),m(3,B,9,4,"form",1)(4,I,9,4)(5,$,14,5),o()),n&2&&(s(3),d(3,h.steps==1?3:h.steps==2?4:h.steps==3?5:-1))},dependencies:[A,V,P,b,F,T,L]});let t=a;return t})();export{W as ForgetPasswordComponent};
